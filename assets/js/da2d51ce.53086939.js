"use strict";(self.webpackChunknx_cdk_plugin_docs=self.webpackChunknx_cdk_plugin_docs||[]).push([[4150],{5680:(e,r,n)=>{n.d(r,{xA:()=>p,yg:()=>y});var t=n(6540);function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){a(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=t.createContext({}),c=function(e){var r=t.useContext(s),n=r;return e&&(n="function"==typeof e?e(r):l(l({},r),e)),n},p=function(e){var r=c(e.components);return t.createElement(s.Provider,{value:r},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},m=t.forwardRef(function(e,r){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,y=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?t.createElement(y,l(l({ref:r},p),{},{components:n})):t.createElement(y,l({ref:r},p))});function y(e,r){var n=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i[d]="string"==typeof e?e:a,l[1]=i;for(var c=2;c<o;c++)l[c]=n[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8141:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var t=n(8168),a=(n(6540),n(5680));const o={sidebar_position:1},l="Complete Microservice Example",i={unversionedId:"examples/complete-microservice",id:"examples/complete-microservice",title:"Complete Microservice Example",description:"Build a complete e-commerce order processing system using the Nx CDK Plugin.",source:"@site/docs/examples/complete-microservice.md",sourceDirName:"examples",slug:"/examples/complete-microservice",permalink:"/Nx-CDK-Deploy/docs/examples/complete-microservice",draft:!1,editUrl:"https://github.com/mhshahzad/nx-cdk-deploy/tree/main/docs/docs/examples/complete-microservice.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Organization Best Practices",permalink:"/Nx-CDK-Deploy/docs/best-practices/organization"},next:{title:"Example: Adding Resources to an Existing Service",permalink:"/Nx-CDK-Deploy/docs/examples/adding-resources"}},s={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"1) Generate a preset service",id:"1-generate-a-preset-service",level:2},{value:"2) Add resources (bundles)",id:"2-add-resources-bundles",level:2},{value:"3) Configure environments",id:"3-configure-environments",level:2},{value:"4) Deploy",id:"4-deploy",level:2},{value:"5) Verify",id:"5-verify",level:2},{value:"6) Iterate",id:"6-iterate",level:2},{value:"7) Cleanup",id:"7-cleanup",level:2},{value:"Related docs",id:"related-docs",level:2}],p={toc:c},d="wrapper";function u({components:e,...r}){return(0,a.yg)(d,(0,t.A)({},p,r,{components:e,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"complete-microservice-example"},"Complete Microservice Example"),(0,a.yg)("p",null,"Build a complete e-commerce order processing system using the Nx CDK Plugin."),(0,a.yg)("h2",{id:"architecture-overview"},"Architecture Overview"),(0,a.yg)("p",null,"A minimal e-commerce orders service composed of:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"API Gateway + Lambda for REST endpoints"),(0,a.yg)("li",{parentName:"ul"},"DynamoDB table for persistence"),(0,a.yg)("li",{parentName:"ul"},"SNS topic and SQS queue for event-driven processing"),(0,a.yg)("li",{parentName:"ul"},"Optional S3 bucket for artifacts")),(0,a.yg)("p",null,"Data flow:\n1) Client calls REST API (create order)\n2) API Lambda writes to DynamoDB and publishes an event to SNS\n3) SQS subscription delivers events to a worker Lambda\n4) Worker processes tasks and updates state (DynamoDB/S3)"),(0,a.yg)("h2",{id:"1-generate-a-preset-service"},"1) Generate a preset service"),(0,a.yg)("p",null,"Use the Event Service preset as a foundation:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"nx g @mhshahzad/nx-cdk-deploy:preset --name=orders --preset=event-service\n")),(0,a.yg)("h2",{id:"2-add-resources-bundles"},"2) Add resources (bundles)"),(0,a.yg)("p",null,"Add an API endpoint and a DynamoDB table:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"# API for REST endpoints\nnx g @mhshahzad/nx-cdk-deploy:api-service --project=orders --name=orders-api\n\n# DynamoDB for order state\nnx g @mhshahzad/nx-cdk-deploy:dynamodb --project=orders \\\n  --tableName=OrdersTable \\\n  --partitionKey=id:string \\\n  --sortKey=createdAt:number\n")),(0,a.yg)("p",null,"Optionally add a bucket:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"nx g @mhshahzad/nx-cdk-deploy:s3 --project=orders --bucketName=orders-artifacts\n")),(0,a.yg)("h2",{id:"3-configure-environments"},"3) Configure environments"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Set account/region per env in project config"),(0,a.yg)("li",{parentName:"ul"},"Provide runtime settings via ",(0,a.yg)("inlineCode",{parentName:"li"},".env.dev"),", ",(0,a.yg)("inlineCode",{parentName:"li"},".env.staging"),", ",(0,a.yg)("inlineCode",{parentName:"li"},".env.prod"))),(0,a.yg)("p",null,"See:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/configuration/project-config"},"Project Config")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/configuration/environment-variables"},"Environment Variables")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/core-concepts/environment-management"},"Environment Management"))),(0,a.yg)("h2",{id:"4-deploy"},"4) Deploy"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"nx deploy orders --configuration=dev\n")),(0,a.yg)("p",null,"The ",(0,a.yg)("a",{parentName:"p",href:"/Nx-CDK-Deploy/docs/executors/deploy"},"deploy executor")," synthesizes and deploys the stacks."),(0,a.yg)("h2",{id:"5-verify"},"5) Verify"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Check CloudFormation for stack completion"),(0,a.yg)("li",{parentName:"ul"},"Find API endpoint output and test a POST/GET"),(0,a.yg)("li",{parentName:"ul"},"Inspect DynamoDB items"),(0,a.yg)("li",{parentName:"ul"},"Confirm SNS topic and SQS queue metrics")),(0,a.yg)("h2",{id:"6-iterate"},"6) Iterate"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Add more routes to the API"),(0,a.yg)("li",{parentName:"ul"},"Publish more event types and create consumers"),(0,a.yg)("li",{parentName:"ul"},"Adjust throughput, retention, and concurrency per env")),(0,a.yg)("h2",{id:"7-cleanup"},"7) Cleanup"),(0,a.yg)("p",null,"Destroy the environment when done:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"nx destroy orders --configuration=dev\n")),(0,a.yg)("p",null,"See: ",(0,a.yg)("a",{parentName:"p",href:"/Nx-CDK-Deploy/docs/executors/destroy"},"destroy executor")),(0,a.yg)("h2",{id:"related-docs"},"Related docs"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/generators/overview"},"Generators Overview")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/core-concepts/resource-bundles"},"Resource Bundles")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/examples/ci-cd-pipeline"},"CI/CD Pipeline Example")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Nx-CDK-Deploy/docs/presets/overview"},"Presets Overview"))))}u.isMDXComponent=!0}}]);